<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Build And Test Automation Management</title>

<!-- Bootstrap -->
<link href="../../css/bootstrap.min.css" rel="stylesheet">

<!-- DataTables CSS -->
<link rel="stylesheet" type="text/css"
	href="../../css/jquery.dataTables.min.css">

<!-- Shepherd -->
<!-- <link rel="stylesheet" href="../../css/shepherd-theme-arrows.css" />
    <link rel="stylesheet" href="../../css/shepherd-theme-arrows-plain-buttons.css" /> -->


<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand" href="/">Build And Test Automation
					Management</a>
			</div>
			<ul class="nav navbar-nav">
				<li><a href="/">Builds</a></li>
			</ul>
		</div>
	</div>
	<div class="container">
		<div class="row">
			<div class="page-header" style="margin-top: 75px">
				<h1>
					Build
					<!--<a href="build/create.html"> <button type="button" class="btn btn-success pull-right">Add Test Execution Plan</button></a> -->
				</h1>
			</div>
		</div>
		<div class="row">
			<div id="main_panel" class="panel">
				<div class="panel-heading">
					<h3 class="panel-title" id="build_header"></h3>
				</div>
				<div id="collapseOne" class="panel-collapse collapse in">
					<div class="panel-body">
						<div class="row">
							<div class="col-md-12">
								<dl class="dl-horizontal">
									<dt>Name</dt>
									<dd id="build_name"></dd>

									<dt>Description</dt>
									<dd id="build_description"></dd>
								</dl>
							</div><!-- /.col-md-12 -->
						</div><!-- /.row -->
						<div class="row">
							<div class="col-md-4">
								<h5 style="text-align: center">
									<strong>General</strong>
								</h5>
								<dl class="dl-horizontal">
									<dt>Start Date</dt>
									<dd id="build_date"></dd>

									<dt>End Date</dt>
									<dd id="build_end_date"></dd>

									<dt>Status</dt>
									<dd id="build_status"></dd>

									<dt>Duration</dt>
									<dd id="build_duration"></dd>
								</dl>
							</div>
							<div class="col-md-4">
								<h5 style="text-align: center">
									<strong>Criterias</strong>
								</h5>
								<dl class="dl-horizontal" id="build_criterias"></dl>
							</div>
							<div class="col-md-4">
								<h5 style="text-align: center">
									<strong>Tests Summary</strong>
								</h5>
								<dl class="dl-horizontal" id="build_tests">
									<dt>Total</dt>
									<dd id="build_tests_all"></dd>

									<dt>Pass</dt>
									<dd id="build_tests_pass"></dd>
									
									<dt>Regressions</dt>
									<dd id="build_regressions"></dd>

									<dt>Failures</dt>
									<dd id="build_tests_fail"></dd>

									<dt>Errors</dt>
									<dd id="build_tests_error"></dd>

									<dt title="New Regressions">New</dt>
									<dd id="build_tests_new"></dd>

									<dt title="Fixed Regressions">Fixed</dt>
									<dd id="build_tests_fix"></dd>
								</dl>
							</div>
						</div><!-- /.row -->
						<div class="row" style="margin-bottom:10px">
							<div class="col-md-12">
								<a data-toggle="collapse" href="#collapseDetails" aria-expanded="false" aria-controls="collapseDetails">Show Details</a>
								<div class="collapse" id="collapseDetails">
									<div class="well">
										<div class="row">
											<div class="col-md-6">
												<h5 id="build_info_title" style="text-align: center">
													<strong>Details</strong>
												</h5>
												<dl class="dl-horizontal" id="build_info"></dl>
											</div>
											<div class="col-md-6">
												<h5 id="build_reports_title" style="text-align: center">
													<strong>Reports</strong>
												</h5>
												<dl class="dl-horizontal" id="build_reports"></dl>
											</div>
										</div>
										<div class="row">
											<div class="col-md-12">
												<h3 id="thumbnails">Commits</h3>
												<table id="commits" class="display" cellspacing="0" width="100%">
													<thead>
														<tr>
															<th>Commit Id</th>
															<th>Date Committed</th>
															<th>Author</th>
														</tr>
													</thead>
													<tfoot>
														<tr>
															<th>Commit Id</th>
															<th>Date Committed</th>
															<th>Author</th>
														</tr>
													</tfoot>
												</table>
											</div>
										</div>
									</div>
								</div><!-- /.well -->
							</div><!-- /.col-md-12 -->
						</div><!-- /.row -->
						<div class="row" id="build_timeline_section">
							<div class="col-md-12">
								<div id="build_timeline" style="height: 100px;"></div>
							</div>
						</div>
						<div class="form-horizontal">
							<div class="form-group">
								<div class="row">
									<label for="graphs_link" class="col-sm-2 control-label">Display Graph</label>
									<div class="col-md-2">
										<select class="form-control" id="graphs_link" name="graphs_link"></select>
									</div>
								</div>	
							</div>	
						</div>
						<div class="row">
							<div id="graph-panel"></div>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div style="margin-bottom: 5px">
						<button id="tests_download" type="button" class="btn btn-default">
							<span class="glyphicon glyphicon-cloud-download"></span> Download
							Reports
						</button>
						<button id="tests_compare" type="button" class="btn btn-default">
							<span class="glyphicon glyphicon-resize-small"></span> Compare
							With ...
						</button>
						<a href="/{{build_id}}/search">
							<button id="tests_searches" type="button" class="btn btn-default">
								<span class="glyphicon glyphicon-search"></span> Search
							</button>
						</a>
					</div>
				</div><!-- /.col-md-12 -->
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="list-group" id="reports_list"></div>
				</div><!-- /.col-md-12 -->
			</div><!-- /.row -->
		</div><!-- /.row -->
		<a href="/api/builds/{{build_id}}">Rest</a>
	</div><!-- /.container -->

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="../../js/bootstrap.min.js"></script>
	<!-- DataTables -->
	<script type="text/javascript" charset="utf8"
		src="../../js/jquery.dataTables.min.js"></script>
	<!-- Google Visualization Chart -->
	<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script type="text/javascript" src="../../js/moment.min.js"></script>
	<script type="text/javascript" src="../../js/underscore.min.js"></script>
	<script type="text/javascript" src="../../js/batam.util.js"></script>
	<script type="text/javascript">
	google.load("visualization", "1.1", {packages:["timeline", "corechart"]});
	
	$(document).ready(function(){
		var notAvailable = '';
		var criteriasIds = [];
		var graph = '';
		// Initial fetch
	    $.getJSON('/api/builds/{{build_id}}', displayBuild)
		    .error(handleError)
		    .fail(handleFailure);
		
	    $.getJSON('/api/reports?build_id={{build_id}}', displayReports)
		    .error(handleError)
		    .fail(handleFailure);	
	    
        $.getJSON('/api/tests/criterias?build_id={{build_id}}', initGraph)
        	.error(handleError)
			.fail(handleFailure);
	    
	  	//Submit download button
      	$('#tests_download').click(handleDownloadClick);
	  	
      //Submit download button
      	$('#tests_download').click(handleDownloadClick);
        
      	function handleDownloadClick(){
        	//Display Graphs
        	window.location.href = '/{{build_id}}/download';
  		}
      	
	    function displayBuild(response){
	    	var buildHeader = '';
	    	if(response.build.previous_id != null){
	    		buildHeader += '<a href="/'+response.build.previous_id+'"><span class="glyphicon glyphicon-chevron-left"></span> Previous </a> ';
	    	}
	    	buildHeader += '<span style="padding-left:50px"><a data-toggle="collapse" data-parent="#accordion" href="#collapseOne"><strong>'+response.build.name+'</strong></a></span> ';
	    	if(response.build.next_id != null){
	    		buildHeader += '<span class="pull-right"><a href="/'+response.build.next_id+'"> Next <span class="glyphicon glyphicon-chevron-right"></span></a></span> ';
	    	}
	    	if(response.build.lifecycle_status == 'pending'){
	    		$('#main_panel').addClass('panel-warning')
	    	}else{
	    		$('#main_panel').addClass('panel-default')
	    	}
	    	$('#build_header').html(buildHeader);
	    	$('#build_name').html(response.build.name);
	    	var description = response.build.description == undefined? notAvailable : response.build.description;
	    	$('#build_description').html(description);
	    	var date = response.build.date == undefined ? notAvailable : moment(response.build.date).format('MMM Do YYYY, h:mm:ss a');
	    	$('#build_date').html(date);
	    	var end_date = response.build.end_date == undefined ? notAvailable : moment(response.build.end_date).format('MMM Do YYYY, h:mm:ss a');
	    	$('#build_end_date').html(end_date);
	    	if(response.build.status != undefined){
	    		if(response.build.lifecycle_status == 'pending'){
	    			$('#build_status').html('<span class="label label-warning right">Pending</span>');
	    		}else{
		    		if(response.build.status == 'completed'){
		    			$('#build_status').html('<span class="label label-success">'+response.build.status+'</span>');
		    		}else{
		    			$('#build_status').html('<span class="label label-danger">'+response.build.status+'</span>');
		    		}
	    		}
	    	}else{
	    		if(response.build.lifecycle_status == 'pending'){
	    			$('#build_status').html('<span class="label label-warning right">Pending</span>');
	    		}
	    	}
	    	if(response.build.duration != undefined){
	    		$('#build_duration').html(formatWithLabel(response.build.duration.value, response.build.duration.trend, 600000, true));
	    	}

	    	if(response.build.tests == null){
	    		$('#build_tests_all').html('<span class="label label-info">0</span>');
			}else{
				if(response.build.tests.trend == 1){
					$('#build_tests_all').html(response.build.tests.value+' <span class="glyphicon glyphicon-chevron-up"></span>');
	    		}else if(response.build.tests.trend == -1){
	    			$('#build_tests_all').html(response.build.tests.value+' <span class="glyphicon glyphicon-chevron-down"></span>');
	    		}else{
	    			$('#build_tests_all').html(response.build.tests.value);	 
	    		}
			}
	    	
	    	if(response.build.passes == null){
	    		$('#build_tests_pass').html('<span class="label label-info">0</span>');
			}else{
				if(response.build.passes.trend == 1){
					$('#build_tests_pass').html('<span class="label label-success">'+response.build.passes.value+' <span class="glyphicon glyphicon-chevron-up"></span></span>');
	    		}else if(response.build.passes.trend == -1){
	    			$('#build_tests_pass').html('<span class="label label-warning">'+response.build.passes.value+' <span class="glyphicon glyphicon-chevron-down"></span></span>');
	    		}else{
	    			$('#build_tests_pass').html(response.build.passes.value);	 
	    		}
			}
	    	
	    	if(response.build.regressions == null || response.build.regressions.value == null){
	    		$('#build_regressions').html('<span class="label label-info">0</span>');
    		}else{
    			$('#build_regressions').html(formatWithLabel(response.build.regressions.value, response.build.regressions.trend, 0, false));
    		}

	    	if(response.build.failures == null || response.build.failures.value == null){
	    		$('#build_tests_fail').html('<span class="label label-info">0</span>');
    		}else{
    			$('#build_tests_fail').html(formatWithLabel(response.build.failures.value, response.build.failures.trend, 0, false));
    		}
	    	
	    	if(response.build.errors == null || response.build.errors.value == null){
	    		$('#build_tests_error').html('<span class="label label-info">0</span>');
    		}else{
    			$('#build_tests_error').html(formatWithLabel(response.build.errors.value, response.build.errors.trend, 0, false));
    		}
	    	
	    	if(response.build.new_regressions == null || response.build.new_regressions.value == null){
	    		$('#build_tests_new').html('<span class="label label-info">0</span>');
    		}else{
    			$('#build_tests_new').html(formatWithLabel(response.build.new_regressions.value, response.build.new_regressions.trend, 0, false));
    		}
	    	
	    	if(response.build.fixed_regressions == null){
	    		$('#build_tests_fix').html('<span class="label label-info">0</span>');
			}else{
				if(response.build.fixed_regressions.trend == 1){
					$('#build_tests_fix').html('<span class="label label-success">'+response.build.fixed_regressions.value+' <span class="glyphicon glyphicon-chevron-up"></span></span>');
	    		}else if(response.build.fixed_regressions.trend == -1){
	    			$('#build_tests_fix').html('<span class="label label-warning">'+response.build.fixed_regressions.value+' <span class="glyphicon glyphicon-chevron-down"></span></span>');
	    		}else{
	    			$('#build_tests_fix').html(response.build.fixed_regressions.value);	 
	    		}
			}
	    	
	    	if(response.build.criterias != null && response.build.criterias.length != 0){
	    		var buildCriterias = '';
	    		for(var i = 0; i < response.build.criterias.length; i++){
	    			buildCriterias += '<dt><i>'+response.build.criterias[i].name+'</i></dt>'+
	    			'<dd>'+response.build.criterias[i].value+'</dd>';
	    		}
	    		$('#build_criterias').html(buildCriterias);	
	    	}else{
	    		$('#build_criterias').remove();	
	    	} 
	    	if(response.build.infos != null && response.build.infos.length != 0){
	    		var buildInfos = '';
	    		for(var i = 0; i < response.build.infos.length; i++){
	    			buildInfos += '<dt>'+response.build.infos[i].name+'</dt>'+
	    			'<dd>'+response.build.infos[i].value+'</dd>';
	    		}
	    		$('#build_info').html(buildInfos);	
	    	}else{
	    		$('#build_info').remove();
	    		$('#build_info_title').remove();
	    	}  
	    	if(response.build.reports != null && response.build.reports.length != 0){
	    		var buildReports = '';
	    		for(var i = 0; i < response.build.reports.length; i++){
	    			buildReports += '<dt>'+response.build.reports[i].name+'</dt>'+
	    			'<dd>'+response.build.reports[i].value+'</dd>';
	    		}
	    		$('#build_reports').html(buildReports);	
	    	}else{
	    		$('#build_reports').remove();
	    		$('#build_reports_title').remove();
	    	} 
	    	if(response.build.build_timeline.rows.length != 0){
	    		for(var i = 0; i < response.build.build_timeline.rows.length; i++){
	    			response.build.build_timeline.rows[i].c[2].v = new Date(response.build.build_timeline.rows[i].c[2].v);
	    			response.build.build_timeline.rows[i].c[3].v = new Date(response.build.build_timeline.rows[i].c[3].v);
	    		}
	
    	        var container = document.getElementById('build_timeline');
    	        var chart = new google.visualization.Timeline(container);
    	        var dataTable = new google.visualization.DataTable(response.build.build_timeline);

    	        var options = {};

    	        chart.draw(dataTable, options);
	    	}else{
	    		$('#build_timeline_section').remove();
	    	} 
	    	
	    	//If there are no commits we don't display the commit table.
	    	if(response.build.commits != 0){
	    		// load commits
	    	    $('#commits').dataTable( {
	    	        serverSide: true,
	    	        searching: false,
	    	        ajax: {
	    	            url: "/api/commits",
	    	            data: {build_id : "{{build_id}}"},
	    	            type: 'GET',
	    	            timeout: 15000,   
	    	            error: function handleDataTableError( xhr, textStatus, error ) {
	    	    	        if ( textStatus === 'timeout' ) {
	    	    	            alert( 'The server took too long to send the data.' );
	    	    	        }
	    	    	        else {
	    	    	            alert( 'An error occurred on the server. Please try again in a minute.' );
	    	    	        }
	    	    	    }
	    	        }	    	
	    	    });
	    	}else{
	    		$('#thumbnails').remove();
	    		$('#commits').remove();
	    	}
	    	
	    }
	    
	    function displayReports(response){
	    	var listHtml = '';
	    	//TODO If no results, display No Available message
	    	for(var i = 0; i < response.reports.length; i++){
	    		if(response.reports[i].lifecycle_status == 'pending'){
	    			listHtml += '<a href="/{{build_id}}/report/'+response.reports[i].id+'" class="list-group-item list-group-item-warning">';
	           	}else{
	           		listHtml += '<a href="/{{build_id}}/report/'+response.reports[i].id+'" class="list-group-item">';
	           	}
	    		listHtml += '		<div class="row" style="margin-bottom:10px">' +
	    		'			<div class="col-sm-12">' +
	    		'				<strong>'+response.reports[i].name +'</strong>'+
	    		'			</div>' +
	    		'			<div class="col-sm-2 col-sm-offset-2">';
	    		if(response.reports[i].tests == null || response.reports[i].tests.all == undefined){
	    			listHtml += '		<strong> Tests <span class="label label-info">0</span></strong>';
    			}else{
    				if(response.reports[i].tests.all.trend == 1){
    					listHtml += '		<strong> Tests <span>'+response.reports[i].tests.all.value+' <span class="glyphicon glyphicon-chevron-up"></span></span></strong>';
		    		}else if(response.reports[i].tests.all.trend == -1){
		    			listHtml +=	'		<strong> Tests <span>'+response.reports[i].tests.all.value+' <span class="glyphicon glyphicon-chevron-down"></span></span></strong>';
		    		}else{
		    			listHtml += '		<strong> Tests <span>'+response.reports[i].tests.all.value+'</span></strong>';	 
		    		}
    			}
	    		listHtml += '			</div>' +
	    		'			<div class="col-sm-2">';
	    		if(response.reports[i].tests == null || response.reports[i].tests.passes == undefined){
	    			listHtml += '		<strong> Pass <span class="label label-info">0</span></strong>';
    			}else{
    				if(response.reports[i].tests.passes.trend == 1){
    					listHtml += '		<strong> Pass <span class="label label-success">'+response.reports[i].tests.passes.value+' <span class="glyphicon glyphicon-chevron-up"></span></span></strong>';
		    		}else if(response.reports[i].tests.passes.trend == -1){
		    			listHtml +=	'		<strong> Pass <span class="label label-warning">'+response.reports[i].tests.passes.value+' <span class="glyphicon glyphicon-chevron-down"></span></span></strong>';
		    		}else{
		    			listHtml += '		<strong> Pass <span>'+response.reports[i].tests.passes.value+'</span></strong>';	 
		    		}
    			}
	    		listHtml += '			</div>' +
	    		'			<div class="col-sm-2">';
	    		if(response.reports[i].tests == null || response.reports[i].tests == null || response.reports[i].tests.all_regressions == null || response.reports[i].tests.rall_egressions.value == null){
	    			listHtml += '				<strong> Regressions <span class="label label-info">0</span></strong>';
	    		}else{
	    			listHtml += '				<strong> Regressions '+formatWithLabel(response.reports[i].tests.all_regressions.value, response.reports[i].tests.all_regressions.trend, 0, false)+'</strong>';
	    		}
	    		listHtml += '			</div>' +
	    		'			<div class="col-sm-2">';
	    		if(response.reports[i].tests == null || response.reports[i].tests.failures == null || response.reports[i].tests.failures.value == null){
	    			listHtml += '				<strong> Failures <span class="label label-info">0</span></strong>';
	    		}else{
	    			listHtml += '				<strong> Failures '+formatWithLabel(response.reports[i].tests.failures.value, response.reports[i].tests.failures.trend, 0, false)+'</strong>';
	    		}
	    		listHtml += '			</div>' +
	    		'			<div class="col-sm-2">';
	    		if(response.reports[i].tests == null || response.reports[i].tests.errors == null || response.reports[i].tests.errors.value == null){
	    			listHtml += '				<strong> Errors <span class="label label-info">0</span></strong>';
	    		}else{
	    			listHtml += '				<strong> Errors '+formatWithLabel(response.reports[i].tests.errors.value, response.reports[i].tests.errors.trend, 0, false)+'</strong>';
	    		}
	    		listHtml +=	'			</div>' +
	    		'		</div>' +
	    		'		<div class="list-group-item-text">';
	    		var description = response.reports[i].description == undefined ? '&nbsp;' : response.reports[i].description;
	    		listHtml +=	'  			'+description+'<div class="pull-right"> ';
	    		if(response.reports[i].status == undefined){
	    			listHtml +=	'			<span class="label label-info">Status not available</span>';
	    		}else if(response.reports[i].status == "completed"){
	            	listHtml +=	'			<span class="label label-success">'+response.reports[i].status+'</span>';
	            }else{
	            	listHtml +=	'			<span class="label label-danger">'+response.reports[i].status+'</span>';
	            }
	    		var updateTime = response.reports[i].date == undefined ? notAvailable : moment(response.reports[i].end_date).fromNow();
	            listHtml +=	'  			'+updateTime+'</div>' +
	            '		</div>' +
	            '</a>';
	    	}
	    
	   		$('#reports_list').html(listHtml);
	    	
	    }
	    
	    function initGraph(response){
	    	// Add Show graphs
          	var graphLink = '<option value="">None</option>';//'<ul class="nav nav-tabs" role="tablist">';
          	for(var i = 0; i < response.criterias.length; i++){
          		if(response.criterias[i].name == 'Tags'){
          		//We don't display graphs based on tags values
        			continue;
          		}
				if(graph != null && replaceAll(" ", "_", response.criterias[i].name.toLowerCase()) == graph){
					graphLink += '<option id="graph_link_'+replaceAll(" ", "_", response.criterias[i].name.toLowerCase())+'" value="'+replaceAll(" ", "_", response.criterias[i].name.toLowerCase())+'" selected="selected">'+response.criterias[i].name+'</li>';
				}else{
					graphLink += '<option id="graph_link_'+replaceAll(" ", "_", response.criterias[i].name.toLowerCase())+'" value="'+replaceAll(" ", "_", response.criterias[i].name.toLowerCase())+'">'+response.criterias[i].name+'</li>';
				}
          	}
	    	//graphLink += '</ul>';
          	$('#graphs_link').html(graphLink);
          	
          	//Display default status graph 
          	if(graph != null && graph != ''){
	          	var query = '?build_id={{build_id}}&graph='+graph;
	        	for(var j = 0; j < criteriasIds.length; j++){
	        		if($('#'+replaceAll(" ", "_", criteriasIds[j].toLowerCase())).val() != null && $('#'+replaceAll(" ", "_", criteriasIds[j].toLowerCase())).val() != ''){
	          			query += "&"+replaceAll(" ", "_", criteriasIds[j].toLowerCase())+'='+$('#'+replaceAll(" ", "_", criteriasIds[j].toLowerCase())).val();
	        		}
	        	}
        	
	        	//Display Graphs
	        	$.getJSON('/api/tests/stat'+query, displayGraph)
	        		.error(handleError)
	    			.fail(handleFailure);
          	}
          	
          	//Add event click to show graph
          	$('#graphs_link').change(handleGraphClick);
	    }
	    
	    function handleGraphClick(){

  			graph = $('#graphs_link').val();
  			if(graph == null || graph == ''){
  				$('#graph-panel').html('');
  				return;
  			}
  			var query = '?build_id={{build_id}}&graph='+graph;
        	for(var j = 0; j < criteriasIds.length; j++){
        		if($('#'+replaceAll(" ", "_", criteriasIds[j].toLowerCase())).val() != null && $('#'+replaceAll(" ", "_", criteriasIds[j].toLowerCase())).val() != ''){
          			query += "&"+replaceAll(" ", "_", criteriasIds[j].toLowerCase())+'='+$('#'+replaceAll(" ", "_", criteriasIds[j].toLowerCase())).val();
        		}
        	}
        	//Display Graphs
        	$.getJSON('/api/tests/stat'+query, displayGraph)
    			.error(handleError)
				.fail(handleFailure);
  		}
	    
	    function displayGraph(response){
	 		$('#graph-panel').html('<div class="col-md-6" id="graph" style="height: 300px"></div><div class="col-md-6" id="trend"></div>');
            var dataSource = [];
            dataSource[0] = [response.stat.name, "Count"]
            for(var j = 0; j < response.stat.values.length; j++){
            	dataSource[j+1] = [response.stat.values[j].name, response.stat.values[j].value];
            }
           
            var data = google.visualization.arrayToDataTable(dataSource);
			var chartTitle = "Tests executed Per " + response.stat.name;
          	var options = {
            	title: chartTitle,
          	};

          	var chart = new google.visualization.PieChart(document.getElementById("graph"));
          	chart.draw(data, options);
          	
          	displayTrend(response);
	  	}
	    
	});
              
    </script>
</body>
</html>